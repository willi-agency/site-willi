---
import { config } from 'src/config/site';
import type { KeywordPage } from 'src/schemas/keywordPage';


interface Props {
  keywords: KeywordPage[];
}

const { keywords } = Astro.props as Props;
---

<section class="max-w-7xl mx-auto px-4 py-10">
  <h2 class="text-3xl font-bold mb-6 w-full">
    Você também pode se interessar por estes artigos:
  </h2>
  <div class="grid gap-6 grid-cols-1 md:grid-cols-3 lg:grid-cols-3">
    {keywords.length > 0 ? (
      keywords
        .sort(() => Math.random() - 0.5) // Randomiza a ordem
        .slice(0, 3) // Limita a 3 itens
        .map((kw) =>
          kw.content ? (
            <a
              href={`/informacoes/${kw.slug}`}
              class="bg-white p-5 rounded-2xl shadow hover:shadow-lg transition !no-underline"
            >
              <img
                src={`/images/palavras/${kw.slug}/${kw.slug}.jpg`}
                alt={config.company.name}
                class="!m-0 !rounded-none min-h-[254px]"
              />
              <p class="!mt-2 !font-medium !text-md !text-[#171D32] !m-0">{kw.keyword}</p>
              <p class="mt-2 text-xs text-gray-400">
                Criado em {new Date(kw.createdAt).toLocaleDateString('pt-BR')}
              </p>
            </a>
          ) : (
            <div class="bg-white p-5 rounded-2xl shadow" title="Sem conteúdo disponível">
              <h2 class="text-xl font-semibold mb-2">{kw.keyword}</h2>
              <p class="text-gray-600 text-sm line-clamp-2">{kw.description ?? ''}</p>
              <p class="mt-3 text-xs text-gray-400">
                Criado em {new Date(kw.createdAt).toLocaleDateString('pt-BR')}
              </p>
            </div>
          )
        )
    ) : (
      <p class="text-center text-gray-600 w-full col-span-4">
        Nenhuma informação encontrada
      </p>
    )}
  </div>
</section>
